{"version":3,"sources":["assets/images/logo.jpg","store/actions/index.js","store/actions/video.js","store/actions/api.js","store/reducers/api.js","store/actions/watch.js","services/url/index.js","store/reducers/videos.js","store/api/youtube-api-response-types.js","containers/SideBar/SideBarItem/SideBarItem.js","containers/SideBar/SideBarHeader/SideBarHeader.js","containers/SideBar/Subscriptions/Subscription/Subscription.js","containers/SideBar/Subscriptions/Subscriptions.js","containers/SideBar/SideBarFooter/SideBarFooter.js","containers/SideBar/SideBar.js","components/VideoGrid/VideoGridHeader/VideoGridHeader.js","services/number/number-format.js","services/date/date-format.js","components/VideoPreview/VideoPreview.js","components/VideoGrid/VideoGrid.js","components/InfiniteScroll/InfiniteScroll.js","containers/Home/HomeContent/HomeContent.js","containers/Home/Home.js","containers/HeaderNav/HeaderNav.js","components/ScrollToTop/ScrollToTop.js","components/AppLayout/AppLayout.js","store/actions/comment.js","components/Video/Video.js","components/Rating/Rating.js","components/VideoMetadata/VideoMetadata.js","components/VideoInfoBox/VideoInfoBox.js","containers/Comments/CommentsHeader/CommentsHeader.js","containers/Comments/Comment/Comment.js","containers/Comments/AddComment/AddComment.js","containers/Comments/Comments.js","components/RelatedVideos/NextUpVideo/NextUpVideo.js","components/RelatedVideos/RelatedVideos.js","store/reducers/channels.js","store/reducers/comments.js","containers/Watch/WatchContent/WatchContent.js","containers/Watch/Watch.js","components/VideoList/VideoList.js","containers/Trending/Trending.js","store/actions/search.js","store/reducers/search.js","containers/Search/Search.js","App.js","store/reducers/index.js","store/api/youtube-api.js","store/sagas/video.js","store/sagas/watch.js","store/sagas/comment.js","store/sagas/search.js","store/sagas/index.js","index.js","store/configureStore.js"],"names":["module","exports","REQUEST","SUCCESS","FAILURE","createAction","type","payload","createRequestTypes","base","Error","reduce","acc","MOST_POPULAR","mostPopular","request","amount","loadDescription","nextPageToken","success","response","failure","VIDEO_CATEGORIES","categories","MOST_POPULAR_BY_CATEGORY","mostPopularByCategory","youtubeLibraryLoaded","bind","initialState","libraryLoaded","getYoutubeLibraryLoaded","state","api","WATCH_DETAILS","details","videoId","channelId","VIDEO_DETAILS","videoDetails","getSearchParam","location","name","search","URLSearchParams","get","byId","byCategory","related","reduceFetchMostPopularVideos","prevState","videoMap","items","accumulator","video","id","Object","keys","hasOwnProperty","totalResults","pageInfo","reduceFetchVideoCategories","categoryMapping","category","snippet","title","reduceFetchMostPopularVideosByCategory","responses","byCategoryMap","forEach","index","status","categoryId","videos","push","groupVideosByIdAndCategory","result","reduceWatchDetails","find","r","kind","relatedEntry","relatedVideoIds","map","reduceRelatedVideosRequest","reduceVideoDetails","parsedVideos","filter","getChannelId","getRelatedVideos","createSelector","getVideoById","getMostPopularVideos","videosById","getVideoCategoryIds","getVideosByCategory","videosByCategory","videoIds","videoCategoriesLoaded","length","videosByCategoryLoaded","getAmountComments","statistics","commentCount","getMostPopular","allMostPopularVideosLoaded","getMostPopularVideosNextPageToken","SideBarItem","props","useReactRouter","highlight","pathname","path","includes","shouldBeHighlighted","to","Menu","Item","className","join","Icon","size","icon","label","SideBarHeader","heading","toUpperCase","Header","Subscription","rightElement","broadcasting","amountNewVideos","Image","src","avatar","Subscriptions","Divider","SideBarFooter","SideBar","borderless","vertical","stackable","fixed","VideoGridHeader","UNITS","getShortNumberString","number","digits","some","element","lowerBound","Math","pow","i","decimal","toFixed","toString","objMap","numbers","datePattern","timePattern","pattern","RegExp","getVideoDurationString","iso8601DateString","match","slice","prev","next","idx","parseFloat","days","hours","minutes","seconds","secondsString","minutesString","accumulatedHours","padStart","TimeAgo","locale","en","timeAgo","VideoPreview","this","videoDuration","contentDetails","duration","viewAndTimeString","getFormattedViewAndTime","horizontal","expanded","description","thumbnails","medium","url","channelTitle","publicationDate","Date","publishedAt","viewCount","viewCountShort","format","React","Component","VideoGrid","gridItems","key","divider","hideDivider","Fragment","InfiniteScroll","children","onEnter","bottomReachedCallback","Loader","active","showLoader","inline","HomeContent","trendingVideos","getTrendingVideos","categoryGrids","getVideoGridsForCategories","categoryTitles","categoryTitle","mostPopularVideos","connect","Home","fetchVideosByCategory","categoryIndex","shouldShowLoader","fetchCategoriesAndMostPopularVideos","prevProps","videoCategories","fetchMostPopularVideos","fetchVideoCategories","categoryStartIndex","fetchMostPopularVideosByCategory","setState","dispatch","videoActions","bindActionCreators","HeaderNav","onInputChange","event","query","target","value","onSubmit","escapedSearchQuery","encodeURI","history","header","logo","Form","Field","Input","placeholder","action","onChange","position","withRouter","useEffect","window","scrollTo","AppLayout","COMMENT_THREAD","thread","Video","embedUrl","frameBorder","allow","allowFullScreen","Rating","rating","likeCount","dislikeCount","amountLikes","amountDislikes","percentagePositiveRatings","Progress","percent","VideoMetadata","Number","toLocaleString","Button","basic","labelPosition","VideoInfoBox","onToggleCollapseButtonClick","collapsed","videoDescription","split","paragraph","channel","subscriberCount","descriptionTextClass","buttonTitle","descriptionParagraphs","getDescriptionParagraphs","getConfig","publishedAtString","parse","toDateString","buttonText","getSubscriberButtonText","channelThumbnail","circular","color","compact","onClick","CommentsHeader","amountComments","Comment","comment","topLevelComment","authorProfileImageUrl","authorDisplayName","textOriginal","AddComment","TextArea","control","autoheight","Comments","comments","NextUpVideo","Checkbox","toggle","defaultChecked","RelatedVideos","nextUpVideo","relatedVideosPreviews","relatedVideo","channelResponse","channels","channelEntry","getChannel","byVideo","reduceCommentThread","res","newComments","item","prevCommentIds","ids","commentIds","byVideoComment","getCommentsForVideo","allComments","commentId","getCommentNextPageToken","WatchContent","relatedVideos","Watch","fetchMoreComments","fetchCommentThread","getVideoId","fetchWatchContent","fetchWatchDetails","watchActions","commentActions","VideoList","videoPreviews","getVideoPreviews","Trending","fetchMoreVideos","fetchTrendingVideos","loaderActive","SEARCH_FOR_VIDEOS","forVideos","searchQuery","reduceSearchForVideos","searchResults","results","concat","getSearchResults","getSearchNextPageToken","Search","searchForVideos","getSearchQuery","youtubeApiLoaded","searchActions","App","component","render","loadYoutubeApi","script","document","createElement","onload","gapi","load","client","setApiKey","body","appendChild","combineReducers","buildApiRequest","requestMethod","params","properties","p","removeEmptyParams","resource","normalizedProps","substr","adjustedName","replace","prop","propArray","ref","pa","createResource","method","buildMostPopularVideosRequest","videoCategoryId","fields","part","chart","maxResults","regionCode","pageToken","buildVideoDetailRequest","buildRelatedVideosRequest","amountRelatedVideos","relatedToVideoId","buildChannelRequest","buildCommentThreadRequest","buildSearchRequest","q","watchMostPopularVideos","watchVideoCategories","watchMostPopularVideosByCategory","fetchEntity","requests","wrapper","ignoreErrors","call","all","put","take","fork","takeEvery","watchWatchDetails","fetchVideoDetails","shouldFetchChannelInfo","searchListResponse","relatedVideoId","videoDetailResponse","fn","watchCommentThread","watchSearchForVideos","entity","args","ignoreErrorCallback","then","store","sagaMiddleware","createSagaMiddleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","run","rootSaga","configureStore","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.83f2bbe5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.e5520ae2.jpg\";","export const REQUEST = 'REQUEST';\r\nexport const SUCCESS = 'SUCCESS';\r\nexport const FAILURE = 'FAILURE';\r\n\r\nexport function createAction(type, payload = {}) {\r\n    return {\r\n        type,\r\n        ...payload,\r\n    };\r\n}\r\n\r\nexport function createRequestTypes(base) {\r\n  if (!base) {\r\n    throw new Error('cannot create request type with base = \\'\\' or base = null');\r\n  }\r\n  return [REQUEST, SUCCESS, FAILURE].reduce((acc, type) => {\r\n    acc[type] = `${base}_${type}`;\r\n    return acc;\r\n  }, {});\r\n}","import { createAction, createRequestTypes, REQUEST, SUCCESS, FAILURE } from './index';\r\n\r\nexport const MOST_POPULAR = createRequestTypes('MOST_POPULAR');\r\nexport const mostPopular = {\r\n  request: (amount, loadDescription, nextPageToken) => createAction(MOST_POPULAR[REQUEST], { amount, loadDescription, nextPageToken }),\r\n  success: (response) => createAction(MOST_POPULAR[SUCCESS], { response }),\r\n  failure: (response) => createAction(MOST_POPULAR[FAILURE], { response }),\r\n};\r\n\r\nexport const VIDEO_CATEGORIES = createRequestTypes('VIDEO_CATEGORIES');\r\nexport const categories = {\r\n  request: () => createAction(VIDEO_CATEGORIES[REQUEST]),\r\n  success: (response) => createAction(VIDEO_CATEGORIES[SUCCESS], { response }),\r\n  failure: (response) => createAction(VIDEO_CATEGORIES[FAILURE], { response }),\r\n}\r\n\r\nexport const MOST_POPULAR_BY_CATEGORY = createRequestTypes('MOST_POPULAR_BY_CATEGORY');\r\nexport const mostPopularByCategory = {\r\n  request: (categories) => createAction(MOST_POPULAR_BY_CATEGORY[REQUEST], { categories }),\r\n  success: (response, categories) => createAction(MOST_POPULAR_BY_CATEGORY[SUCCESS], { response, categories }),\r\n  failure: (response) => createAction(MOST_POPULAR_BY_CATEGORY[FAILURE], response),\r\n};","import { createAction } from \"./index\";\r\n\r\nexport const YOUTUBE_LIBRARY_LOADED = \"YOUTUBE_LIBRARY_LOADED\";\r\nexport const youtubeLibraryLoaded = createAction.bind(\r\n    null,\r\n    YOUTUBE_LIBRARY_LOADED\r\n);\r\n","import { YOUTUBE_LIBRARY_LOADED } from \"../actions/api\";\r\n\r\nconst initialState = {\r\n    libraryLoaded: false,\r\n};\r\nexport default function (state = initialState, action) {\r\n    switch (action.type) {\r\n        case YOUTUBE_LIBRARY_LOADED:\r\n            return {\r\n                libraryLoaded: true,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\nexport const getYoutubeLibraryLoaded = (state) => state.api.libraryLoaded;\r\n","import {\r\n  createAction,\r\n  createRequestTypes,\r\n  FAILURE,\r\n  REQUEST,\r\n  SUCCESS,\r\n} from \"./index\";\r\n\r\nexport const WATCH_DETAILS = createRequestTypes(\"WATCH_DETAILS\");\r\nexport const details = {\r\n  request: (videoId, channelId) => createAction(WATCH_DETAILS[REQUEST], { videoId, channelId }),\r\n  success: (response, videoId) => createAction(WATCH_DETAILS[SUCCESS], { response, videoId }),\r\n  failure: (response) => createAction(WATCH_DETAILS[FAILURE], { response }),\r\n};\r\n\r\nexport const VIDEO_DETAILS = createRequestTypes('VIDEO_DETAILS');\r\nexport const videoDetails = {\r\n  request: () => {\r\n    throw Error('not implemented');\r\n  },\r\n  success: (response) => createAction(VIDEO_DETAILS[SUCCESS], {response}),\r\n  failure: (response) => createAction(VIDEO_DETAILS[FAILURE], {response}),\r\n};","export const getSearchParam = (location, name) => {\r\n  if (!location || !location.search) {\r\n    return null;\r\n  }\r\n  const searchParams = new URLSearchParams(location.search);\r\n  return searchParams.get(name);\r\n};\r\n","import {\r\n  MOST_POPULAR,\r\n  MOST_POPULAR_BY_CATEGORY,\r\n  VIDEO_CATEGORIES,\r\n} from \"../actions/video\";\r\nimport { SUCCESS } from \"../actions\";\r\nimport { createSelector } from \"reselect\";\r\nimport {\r\n  VIDEO_LIST_RESPONSE,\r\n  SEARCH_LIST_RESPONSE,\r\n} from \"../api/youtube-api-response-types\";\r\nimport { WATCH_DETAILS, VIDEO_DETAILS } from \"../actions/watch\";\r\nimport { getSearchParam } from \"../../services/url\";\r\n\r\nconst initialState = {\r\n  byId: {},\r\n  mostPopular: {},\r\n  categories: {},\r\n  byCategory: {},\r\n  related: {},\r\n};\r\n\r\nfunction reduceFetchMostPopularVideos(response, prevState) {\r\n  const videoMap = response.items.reduce((accumulator, video) => {\r\n    accumulator[video.id] = video;\r\n    return accumulator;\r\n  }, {});\r\n\r\n  let items = Object.keys(videoMap);\r\n  if (response.hasOwnProperty(\"prevPageToken\") && prevState.mostPopular) {\r\n    items = [...prevState.mostPopular.items, ...items];\r\n  }\r\n\r\n  const mostPopular = {\r\n    totalResults: response.pageInfo.totalResults,\r\n    nextPageToken: response.nextPageToken,\r\n    items,\r\n  };\r\n\r\n  return {\r\n    ...prevState,\r\n    mostPopular,\r\n    byId: { ...prevState.byId, ...videoMap },\r\n  };\r\n}\r\n\r\nfunction reduceFetchVideoCategories(response, prevState) {\r\n  const categoryMapping = response.items.reduce((accumulator, category) => {\r\n    accumulator[category.id] = category.snippet.title;\r\n    return accumulator;\r\n  }, {});\r\n  return {\r\n    ...prevState,\r\n    categories: categoryMapping,\r\n  };\r\n}\r\n\r\nfunction reduceFetchMostPopularVideosByCategory(\r\n  responses,\r\n  categories,\r\n  prevState\r\n) {\r\n  let videoMap = {};\r\n  let byCategoryMap = {};\r\n\r\n  responses.forEach((response, index) => {\r\n    // ignore answer if there was an error\r\n    if (response.status === 400) return;\r\n\r\n    const categoryId = categories[index];\r\n    const { byId, byCategory } = groupVideosByIdAndCategory(response.result);\r\n    videoMap = { ...videoMap, ...byId };\r\n    byCategoryMap[categoryId] = byCategory;\r\n  });\r\n\r\n  // compute new state\r\n  return {\r\n    ...prevState,\r\n    byId: { ...prevState.byId, ...videoMap },\r\n    byCategory: { ...prevState.byCategory, ...byCategoryMap },\r\n  };\r\n}\r\n\r\nfunction reduceWatchDetails(responses, prevState) {\r\n  const videoDetailResponse = responses.find(\r\n    (r) => r.result.kind === VIDEO_LIST_RESPONSE\r\n  );\r\n  // we know that items will only have one element\r\n  // because we explicitly asked for a video with a specific id\r\n  const video = videoDetailResponse.result.items[0];\r\n  const relatedEntry = reduceRelatedVideosRequest(responses);\r\n\r\n  return {\r\n    ...prevState,\r\n    byId: {\r\n      ...prevState.byId,\r\n      [video.id]: video,\r\n    },\r\n    related: {\r\n      ...prevState.related,\r\n      [video.id]: relatedEntry,\r\n    },\r\n  };\r\n}\r\n\r\nfunction reduceRelatedVideosRequest(responses) {\r\n  const relatedVideosResponse = responses.find(\r\n    (r) => r.result.kind === SEARCH_LIST_RESPONSE\r\n  );\r\n  const { pageInfo, items, nextPageToken } = relatedVideosResponse.result;\r\n  const relatedVideoIds = items.map((video) => video.id.videoId);\r\n\r\n  return {\r\n    totalResults: pageInfo.totalResults,\r\n    nextPageToken,\r\n    items: relatedVideoIds,\r\n  };\r\n}\r\n\r\nfunction reduceVideoDetails(responses, prevState) {\r\n  const videoResponses = responses.filter(\r\n    (response) => response.result.kind === VIDEO_LIST_RESPONSE\r\n  );\r\n  const parsedVideos = videoResponses.reduce((videoMap, response) => {\r\n    // we're explicitly asking for a video with a particular id\r\n    // so the response set must either contain 0 items (if a video with the id does not exist)\r\n    // or at most one item (i.e. the channel we've been asking for)\r\n    const video = response.result.items ? response.result.items[0] : null;\r\n    if (!video) {\r\n      return videoMap;\r\n    }\r\n    videoMap[video.id] = video;\r\n    return videoMap;\r\n  }, {});\r\n\r\n  return {\r\n    ...prevState,\r\n    byId: { ...prevState.byId, ...parsedVideos },\r\n  };\r\n}\r\n\r\nexport default function videos(state = initialState, action) {\r\n  switch (action.type) {\r\n    case MOST_POPULAR[SUCCESS]:\r\n      return reduceFetchMostPopularVideos(action.response, state);\r\n    case VIDEO_CATEGORIES[SUCCESS]:\r\n      return reduceFetchVideoCategories(action.response, state);\r\n    case MOST_POPULAR_BY_CATEGORY[SUCCESS]:\r\n      return reduceFetchMostPopularVideosByCategory(\r\n        action.response,\r\n        action.categories,\r\n        state\r\n      );\r\n    case WATCH_DETAILS[SUCCESS]:\r\n      return reduceWatchDetails(action.response, state);\r\n    case VIDEO_DETAILS[SUCCESS]:\r\n      return reduceVideoDetails(action.response, state);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const getChannelId = (state, location, name) => {\r\n  const videoId = getSearchParam(location, name);\r\n  const video = state.videos.byId[videoId];\r\n  if (video) {\r\n    return video.snippet.channelId;\r\n  }\r\n  return null;\r\n};\r\n\r\nconst getRelatedVideoIds = (state, videoId) => {\r\n  const related = state.videos.related[videoId];\r\n\r\n  return related ? related.items : [];\r\n};\r\n\r\nexport const getRelatedVideos = createSelector(\r\n  getRelatedVideoIds,\r\n  (state) => state.videos.byId,\r\n  (relatedVideoIds, videos) => {\r\n    if (relatedVideoIds) {\r\n      // filter kicks out null values we might have\r\n      return relatedVideoIds\r\n        .map((videoId) => videos[videoId])\r\n        .filter((video) => video);\r\n    }\r\n    return [];\r\n  }\r\n);\r\n\r\nexport const getVideoById = (state, videoId) => {\r\n  return state.videos.byId[videoId];\r\n};\r\n\r\nexport const getMostPopularVideos = createSelector(\r\n  (state) => state.videos.byId,\r\n  (state) => state.videos.mostPopular,\r\n  (videosById, mostPopular) => {\r\n    if (!mostPopular || !mostPopular.items) {\r\n      return [];\r\n    }\r\n    return mostPopular.items.map((videoId) => videosById[videoId]);\r\n  }\r\n);\r\n\r\nexport const getVideoCategoryIds = createSelector(\r\n  (state) => state.videos.categories,\r\n  (categories) => {\r\n    return Object.keys(categories || {});\r\n  }\r\n);\r\n\r\nexport const getVideosByCategory = createSelector(\r\n  (state) => state.videos.byCategory,\r\n  (state) => state.videos.byId,\r\n  (state) => state.videos.categories,\r\n  (videosByCategory, videosById, categories) => {\r\n    return Object.keys(videosByCategory || {}).reduce(\r\n      (accumulator, categoryId) => {\r\n        const videoIds = videosByCategory[categoryId].items;\r\n        const categoryTitle = categories[categoryId];\r\n        accumulator[categoryTitle] = videoIds.map(\r\n          (videoId) => videosById[videoId]\r\n        );\r\n        return accumulator;\r\n      },\r\n      {}\r\n    );\r\n  }\r\n);\r\n\r\nexport const videoCategoriesLoaded = createSelector(\r\n  (state) => state.videos.categories,\r\n  (categories) => {\r\n    return Object.keys(categories || {}).length !== 0;\r\n  }\r\n);\r\n\r\nexport const videosByCategoryLoaded = createSelector(\r\n  (state) => state.videos.byCategory,\r\n  (videosByCategory) => {\r\n    return Object.keys(videosByCategory || {}).length;\r\n  }\r\n);\r\n\r\nfunction groupVideosByIdAndCategory(response) {\r\n  const videos = response.items;\r\n  const byId = {};\r\n  const byCategory = {\r\n    totalResults: response.pageInfo.totalResults,\r\n    nextPageToken: response.nextPageToken,\r\n    items: [],\r\n  };\r\n\r\n  videos.forEach((video) => {\r\n    byId[video.id] = video;\r\n\r\n    const items = byCategory.items;\r\n    if (items && items) {\r\n      items.push(video.id);\r\n    } else {\r\n      byCategory.items = [video.id];\r\n    }\r\n  });\r\n\r\n  return { byId, byCategory };\r\n}\r\n\r\nexport const getAmountComments = createSelector(getVideoById, (video) => {\r\n  if (video) {\r\n    return video.statistics.commentCount;\r\n  }\r\n  return 0;\r\n});\r\n\r\nconst getMostPopular = (state) => state.videos.mostPopular;\r\nexport const allMostPopularVideosLoaded = createSelector(\r\n  [getMostPopular],\r\n  (mostPopular) => {\r\n    const amountFetchedItems = mostPopular.items ? mostPopular.items.length : 0;\r\n    return amountFetchedItems === mostPopular.totalResults;\r\n  }\r\n);\r\n\r\nexport const getMostPopularVideosNextPageToken = createSelector(\r\n  getMostPopular,\r\n  (mostPopular) => {\r\n    return mostPopular.nextPageToken;\r\n  }\r\n);\r\n","export const VIDEO_LIST_RESPONSE = 'youtube#videoListResponse';\r\nexport const SEARCH_LIST_RESPONSE = 'youtube#searchListResponse';\r\nexport const CHANNEL_LIST_RESPONSE = 'youtube#channelListResponse';\r\nexport const COMMENT_THREAD_LIST_RESPONSE = 'youtube#commentThreadListResponse';","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Icon, Menu } from \"semantic-ui-react\";\r\nimport \"./SideBarItem.scss\";\r\nimport useReactRouter from \"use-react-router\";\r\n\r\nexport const SideBarItem = (props) => {\r\n  const { location } = useReactRouter();\r\n\r\n  const shouldBeHighlighted = () => {\r\n    const { pathname } = location;\r\n    if (props.path === \"/\") {\r\n      return pathname === props.path;\r\n    }\r\n    return pathname.includes(props.path);\r\n  };\r\n\r\n  // React will ignore custom boolean attributes, therefore we pass a string\r\n  // we use this attribute in our SCSS for styling\r\n  const highlight = shouldBeHighlighted() ? \"highlight-item\" : null;\r\n  return (\r\n    <Link to={{ pathname: props.path }}>\r\n      <Menu.Item className={[\"sidebar-item\", highlight].join(\" \")}>\r\n        <div className=\"sidebar-item-alignment-container\">\r\n          <span>\r\n            <Icon size=\"large\" name={props.icon} />{\" \"}\r\n          </span>\r\n          <span>{props.label}</span>\r\n        </div>\r\n      </Menu.Item>\r\n    </Link>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Menu } from \"semantic-ui-react\";\r\nimport \"./SideBarHeader.scss\";\r\n\r\nexport function SideBarHeader(props) {\r\n    const heading = props.title ? props.title.toUpperCase() : \"\";\r\n    return (\r\n        <Menu.Item>\r\n            <Menu.Header className=\"side-bar-header\">{heading}</Menu.Header>\r\n        </Menu.Item>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { Icon, Image, Menu } from \"semantic-ui-react\";\r\nimport \"./Subscription.scss\";\r\n\r\nexport function Subscription(props) {\r\n    let rightElement = null;\r\n    const { broadcasting, amountNewVideos } = props;\r\n    if (broadcasting) {\r\n        rightElement = <Icon name=\"signal\" />;\r\n    } else if (amountNewVideos) {\r\n        rightElement = (\r\n            <span className=\"new-videos-count\">{amountNewVideos}</span>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Menu.Item>\r\n            <div className=\"subscription\">\r\n                <div>\r\n                    <Image src=\"http://via.placeholder.com/28x28\" avatar />\r\n                    <span>{props.label}</span>\r\n                </div>\r\n                {rightElement}\r\n            </div>\r\n        </Menu.Item>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { Subscription } from \"./Subscription/Subscription\";\r\nimport { Divider } from \"semantic-ui-react\";\r\nimport { SideBarHeader } from \"../SideBarHeader/SideBarHeader\";\r\n\r\nexport const Subscriptions = () => {\r\n    return (\r\n        <>\r\n            <SideBarHeader title=\"Subscriptions\" />\r\n            <Subscription label=\"MusicChannel\" broadcasting />\r\n            <Subscription label=\"Coursera\" amountNewVideos={10} />\r\n            <Subscription label=\"TEDx Talks\" amountNewVideos={23} />\r\n            <Subscription label=\"Stanford iOS\" amountNewVideos={4} />\r\n            <Subscription label=\"Udacity\" amountNewVideos={114} />\r\n            <Divider />\r\n        </>\r\n    );\r\n};\r\n","import React from \"react\";\r\nimport \"./SideBarFooter.scss\";\r\n\r\nexport function SideBarFooter() {\r\n    return (\r\n        <>\r\n            <div className=\"footer-block\">\r\n                <div>About Press Copyright</div>\r\n                <div>Creators Advertise</div>\r\n                <div>Developers +MyTube</div>\r\n                <div>Legal</div>\r\n            </div>\r\n            <div className=\"footer-block\">\r\n                <div>Terms Privacy</div>\r\n                <div>Policy & Safety</div>\r\n                <div>Test new features</div>\r\n            </div>\r\n            <div className=\"footer-block\">\r\n                <div>All prices include VAT</div>\r\n            </div>\r\n            <div className=\"footer-block\">\r\n                <div>\r\n                    A Youtube clone for educational\r\n                    purposes under fair use.\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { SideBarItem } from \"./SideBarItem/SideBarItem\";\r\nimport { Menu, Divider } from \"semantic-ui-react\";\r\nimport \"./SideBar.scss\";\r\nimport { SideBarHeader } from \"./SideBarHeader/SideBarHeader\";\r\nimport { Subscriptions } from \"./Subscriptions/Subscriptions\";\r\nimport { SideBarFooter } from \"./SideBarFooter/SideBarFooter\";\r\n\r\nexport const SideBar = () => {\r\n  return (\r\n    <Menu borderless vertical stackable fixed=\"left\" className=\"side-nav\">\r\n      <SideBarItem path=\"/\" label=\"Home\" icon=\"home\" />\r\n      <SideBarItem path=\"/feed/trending\" label=\"Trending\" icon=\"fire\" />\r\n      <SideBarItem label=\"Followers\" icon=\"spy\" />\r\n      <Divider />\r\n      <SideBarHeader title=\"Library\" />\r\n      <SideBarItem label=\"History\" icon=\"history\" />\r\n      <SideBarItem label=\"Watch later\" icon=\"clock\" />\r\n      <SideBarItem label=\"Liked videos\" icon=\"thumbs up\" />\r\n      <Divider />\r\n      <Subscriptions />\r\n      <SideBarHeader title=\"More from Youtube\" />\r\n      <SideBarItem label=\"Movies and Shows\" icon=\"film\" />\r\n      <Divider />\r\n      <SideBarItem label=\"Report history\" icon=\"flag\" />\r\n      <SideBarItem label=\"Help\" icon=\"help circle\" />\r\n      <SideBarItem label=\"Send feedback\" icon=\"comment\" />\r\n      <Divider />\r\n      <SideBarFooter />\r\n    </Menu>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"./VideoGridHeader.scss\";\r\n\r\nexport function VideoGridHeader(props) {\r\n    return (\r\n        <div className=\"video-grid-header\">\r\n            <span className=\"title\">{props.title}</span>\r\n        </div>\r\n    );\r\n}\r\n","const UNITS = ['K', 'M', 'B', 'T'];\r\n\r\n// https://stackoverflow.com/a/28608086/2328833\r\nexport function getShortNumberString(number) {\r\n    const shouldShowDecimalPlace = UNITS.some((element, index) => {\r\n        const lowerBound = Math.pow(1000, index + 1);\r\n        const upperBound = lowerBound + lowerBound * 10;\r\n        return number > lowerBound && number < upperBound\r\n    });\r\n    const digits = shouldShowDecimalPlace ? 1 : 0;\r\n    for (let i = UNITS.length - 1; i >= 0; i--) {\r\n        const decimal = Math.pow(1000, i + 1);\r\n\r\n        if (number >= decimal) {\r\n            return (number / decimal).toFixed(digits) + UNITS[i];\r\n        }\r\n    }\r\n    return number.toString();\r\n}","const objMap = [\"years\", \"months\", \"days\", \"hours\", \"minutes\", \"seconds\"];\r\nconst numbers = \"\\\\d+(?:[\\\\.,]\\\\d{0,3})?\";\r\nconst datePattern = `(${numbers}Y)?(${numbers}M)?(${numbers}D)?`;\r\nconst timePattern = `T(${numbers}H)?(${numbers}M)?(${numbers}S)?`;\r\nconst pattern = new RegExp(`P(?:${datePattern}(?:${timePattern})?)`);\r\n\r\nexport function parseISO8601TimePattern(durationString) {\r\n  // https://github.com/tolu/ISO8601-duration/blob/master/src/index.js\r\n  return durationString\r\n    .match(pattern)\r\n    .slice(1)\r\n    .reduce((prev, next, idx) => {\r\n      prev[objMap[idx]] = parseFloat(next) || 0;\r\n      return prev;\r\n    }, {});\r\n}\r\n\r\nexport function getPublishedAtDateString(iso8601DateString) {\r\n  if (!iso8601DateString) {\r\n    return \"\";\r\n  }\r\n  const date = new Date(Date.parse(iso8601DateString));\r\n  return date.toDateString();\r\n}\r\n\r\nexport function getVideoDurationString(iso8601DateString) {\r\n  if (!iso8601DateString || iso8601DateString === \"\") {\r\n    return \"\";\r\n  }\r\n\r\n  // new Date(Date.parse(...)) doesn't work here\r\n  // therefore we are using our regex approach\r\n  let { days, hours, minutes, seconds } = parseISO8601TimePattern(\r\n    iso8601DateString\r\n  );\r\n\r\n  let secondsString = seconds.toString();\r\n  let minutesString = minutes.toString();\r\n  let accumulatedHours = days * 24 + hours;\r\n\r\n  if (seconds < 10) {\r\n    secondsString = seconds.toString().padStart(2, \"0\");\r\n  }\r\n  if (minutes < 10 && hours !== 0) {\r\n    minutesString = minutesString.toString().padStart(2, \"0\");\r\n  }\r\n  if (!accumulatedHours) {\r\n    return [minutesString, secondsString].join(\":\");\r\n  } else {\r\n    return [accumulatedHours, minutesString, secondsString].join(\":\");\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { Image } from \"semantic-ui-react\";\r\nimport \"./VideoPreview.scss\";\r\nimport TimeAgo from \"javascript-time-ago\";\r\nimport en from \"javascript-time-ago/locale/en\";\r\nimport { getShortNumberString } from \"../../services/number/number-format\";\r\nimport { getVideoDurationString } from \"../../services/date/date-format\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nTimeAgo.locale(en);\r\nconst timeAgo = new TimeAgo(\"en-US\");\r\n\r\nexport class VideoPreview extends React.Component {\r\n  render() {\r\n    const { video } = this.props;\r\n    if (!video) {\r\n      return <div />;\r\n    }\r\n\r\n    const duration = video.contentDetails\r\n      ? video.contentDetails.duration\r\n      : null;\r\n    const videoDuration = getVideoDurationString(duration);\r\n    const viewAndTimeString = VideoPreview.getFormattedViewAndTime(video);\r\n    const horizontal = this.props.horizontal ? \"horizontal\" : null;\r\n    const expanded = this.props.expanded ? \"expanded\" : null;\r\n    const description = this.props.expanded ? video.snippet.description : null;\r\n\r\n    return (\r\n      <Link to={{ pathname: this.props.pathname, search: this.props.search }}>\r\n        <div className={[\"video-preview\", horizontal, expanded].join(\" \")}>\r\n          <div className=\"image-container\">\r\n            <Image src={video.snippet.thumbnails.medium.url} />\r\n            <div className=\"time-label\">\r\n              <span>{videoDuration}</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"video-info\">\r\n            <div\r\n              className={[\"semi-bold\", \"show-max-two-lines\", expanded].join(\r\n                \" \"\r\n              )}\r\n            >\r\n              {video.snippet.title}\r\n            </div>\r\n            <div className=\"video-preview-metadata-container\">\r\n              <div className=\"channel-title\">{video.snippet.channelTitle}</div>\r\n              <div className=\"view-and-time\">{viewAndTimeString}</div>\r\n              <div className=\"show-max-two-lines\">{description}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Link>\r\n    );\r\n  }\r\n\r\n  static getFormattedViewAndTime(video) {\r\n    const publicationDate = new Date(video.snippet.publishedAt);\r\n    const viewCount = video.statistics ? video.statistics.viewCount : null;\r\n    if (viewCount) {\r\n      const viewCountShort = getShortNumberString(video.statistics.viewCount);\r\n      return `${viewCountShort} views • ${timeAgo.format(publicationDate)}`;\r\n    }\r\n    return \"\";\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./VideoGrid.scss\";\r\nimport { VideoGridHeader } from \"./VideoGridHeader/VideoGridHeader\";\r\nimport { Divider } from \"semantic-ui-react\";\r\nimport { VideoPreview } from \"../VideoPreview/VideoPreview\";\r\n\r\nexport function VideoGrid(props) {\r\n  if (!props.videos || !props.videos.length) {\r\n    return <div />;\r\n  }\r\n  const gridItems = props.videos.map((video) => {\r\n    return (\r\n      <VideoPreview\r\n        video={video}\r\n        key={video.id}\r\n        pathname=\"/watch\"\r\n        search={`v=${video.id}`}\r\n      />\r\n    );\r\n  });\r\n\r\n  const divider = props.hideDivider ? null : <Divider />;\r\n  return (\r\n    <React.Fragment>\r\n      <VideoGridHeader title={props.title} />\r\n      <div className=\"video-grid\">{gridItems}</div>\r\n      {divider}\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport {Waypoint} from 'react-waypoint';\r\nimport {Loader} from 'semantic-ui-react';\r\nimport './InfiniteScroll.scss';\r\n\r\nexport function InfiniteScroll(props) {\r\n  return (\r\n    <>\r\n      {props.children}\r\n      <Waypoint onEnter={props.bottomReachedCallback}>\r\n        <div className='loader-container'>\r\n          <Loader active={props.showLoader} inline='centered' />\r\n        </div>\r\n      </Waypoint>\r\n    </>\r\n  );\r\n}","import { VideoGrid } from \"../../../components/VideoGrid/VideoGrid\";\r\nimport React from \"react\";\r\nimport \"./HomeContent.scss\";\r\nimport {\r\n  getMostPopularVideos,\r\n  getVideosByCategory,\r\n} from \"../../../store/reducers/videos\";\r\nimport { connect } from \"react-redux\";\r\nimport { InfiniteScroll } from \"../../../components/InfiniteScroll/InfiniteScroll\";\r\n\r\nconst AMOUNT_TRENDING_VIDEOS = 12;\r\n\r\nexport class HomeContent extends React.Component {\r\n  render() {\r\n    const trendingVideos = this.getTrendingVideos();\r\n    const categoryGrids = this.getVideoGridsForCategories();\r\n\r\n    return (\r\n      <div className=\"home-content\">\r\n        <div className=\"responsive-video-grid-container\">\r\n          <InfiniteScroll\r\n            bottomReachedCallback={this.props.bottomReachedCallback}\r\n            showLoader={this.props.showLoader()}\r\n          >\r\n            <VideoGrid title=\"Trending\" videos={trendingVideos} />\r\n            {categoryGrids}\r\n          </InfiniteScroll>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getVideoGridsForCategories() {\r\n    const categoryTitles = Object.keys(this.props.videosByCategory || {});\r\n    return categoryTitles.map((categoryTitle, index) => {\r\n      const videos = this.props.videosByCategory[categoryTitle];\r\n      // the last video grid element should not have a divider\r\n      const hideDivider = index === categoryTitles.length - 1;\r\n      return (\r\n        <VideoGrid\r\n          title={categoryTitle}\r\n          videos={videos}\r\n          key={categoryTitle}\r\n          hideDivider={hideDivider}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  getTrendingVideos() {\r\n    return (\r\n      this.props.mostPopularVideos &&\r\n      this.props.mostPopularVideos.slice(0, AMOUNT_TRENDING_VIDEOS)\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    videosByCategory: getVideosByCategory(state),\r\n    mostPopularVideos: getMostPopularVideos(state),\r\n  };\r\n}\r\nexport default connect(mapStateToProps, null)(HomeContent);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport * as videoActions from \"../../store/actions/video\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getYoutubeLibraryLoaded } from \"../../store/reducers/api\";\r\nimport \"./Home.scss\";\r\nimport { getVideoCategoryIds, videoCategoriesLoaded, videosByCategoryLoaded } from \"../../store/reducers/videos\";\r\n\r\nimport { SideBar } from \"../SideBar/SideBar\";\r\nimport HomeContent from \"./HomeContent/HomeContent\";\r\n\r\nexport class Home extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      categoryIndex: 0,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <SideBar />\r\n        <HomeContent\r\n          bottomReachedCallback={this.bottomReachedCallback}\r\n          showLoader={() => this.shouldShowLoader()}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.youtubeLibraryLoaded) {\r\n      this.fetchCategoriesAndMostPopularVideos();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\r\n      this.fetchCategoriesAndMostPopularVideos();\r\n    } else if (this.props.videoCategories !== prevProps.videoCategories) {\r\n      this.fetchVideosByCategory();\r\n    }\r\n  }\r\n\r\n  fetchCategoriesAndMostPopularVideos() {\r\n    this.props.fetchMostPopularVideos();\r\n    this.props.fetchVideoCategories();\r\n  }\r\n\r\n  fetchVideosByCategory() {\r\n    const categoryStartIndex = this.state.categoryIndex;\r\n    const categories = this.props.videoCategories.slice(\r\n      categoryStartIndex,\r\n      categoryStartIndex + 3\r\n    );\r\n    this.props.fetchMostPopularVideosByCategory(categories);\r\n    this.setState((prevState) => {\r\n      return {\r\n        categoryIndex: prevState.categoryIndex + 3,\r\n      };\r\n    });\r\n  }\r\n\r\n  bottomReachedCallback = () => {\r\n    if (!this.props.videoCategoriesLoaded) {\r\n      return;\r\n    }\r\n    this.fetchVideosByCategory();\r\n  };\r\n\r\n  shouldShowLoader() {\r\n    if (this.props.videoCategoriesLoaded && this.props.videosByCategoryLoaded) {\r\n      return this.state.categoryIndex < this.props.videoCategories.length;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\r\n    videoCategories: getVideoCategoryIds(state),\r\n    videoCategoriesLoaded: videoCategoriesLoaded(state),\r\n    videosByCategoryLoaded: videosByCategoryLoaded(state),\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  const fetchMostPopularVideos = videoActions.mostPopular.request;\r\n  const fetchVideoCategories = videoActions.categories.request;\r\n  const fetchMostPopularVideosByCategory =\r\n    videoActions.mostPopularByCategory.request;\r\n  return bindActionCreators(\r\n    {\r\n      fetchMostPopularVideos,\r\n      fetchVideoCategories,\r\n      fetchMostPopularVideosByCategory,\r\n    },\r\n    dispatch\r\n  );\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\r\n","import React from 'react';\r\nimport {Form, Icon, Image, Input, Menu} from 'semantic-ui-react';\r\nimport './HeaderNav.scss';\r\nimport logo from '../../assets/images/logo.jpg';\r\nimport {Link, withRouter} from 'react-router-dom';\r\n\r\nexport class HeaderNav extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      query: '',\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      // 1\r\n      <Menu borderless className='top-menu' fixed='top'>\r\n        {/* 2 */}\r\n        <Menu.Item header className='logo'>\r\n          <Link to='/'><Image src={logo} size='tiny'/></Link>\r\n        </Menu.Item>\r\n        {/* 3 */}\r\n        <Menu.Menu className='nav-container'>\r\n          <Menu.Item className='search-input'>\r\n            <Form onSubmit={this.onSubmit}>\r\n              {/* 4 */}\r\n              <Form.Field>\r\n                <Input placeholder='Search'\r\n                       size='small'\r\n                       action='Go'\r\n                       value={this.state.query}\r\n                       onChange={this.onInputChange}\r\n                />\r\n              </Form.Field>\r\n            </Form>\r\n          </Menu.Item>\r\n          {/* 5 */}\r\n          <Menu.Menu position='right'>\r\n            <Menu.Item>\r\n              {/* 6 */}\r\n              <Icon className='header-icon' name='video camera' size='large'/>\r\n            </Menu.Item>\r\n            <Menu.Item>\r\n              <Icon className='header-icon' name='grid layout' size='large'/>\r\n            </Menu.Item>\r\n            <Menu.Item>\r\n              <Icon className='header-icon' name='chat' size='large'/>\r\n            </Menu.Item>\r\n            <Menu.Item>\r\n              <Icon className='header-icon' name='alarm' size='large'/>\r\n            </Menu.Item>\r\n            {/* 7*/}\r\n            <Menu.Item name='avatar'>\r\n              <Image src='https://via.placeholder.com/80x80' avatar/>\r\n            </Menu.Item>\r\n          </Menu.Menu>\r\n        </Menu.Menu>\r\n      </Menu>\r\n    );\r\n  }\r\n  onInputChange = (event) => {\r\n    this.setState({\r\n      query: event.target.value,\r\n    });\r\n  };\r\n\r\n  onSubmit = () => {\r\n    const escapedSearchQuery = encodeURI(this.state.query);\r\n    this.props.history.push(`/results?search_query=${escapedSearchQuery}`);\r\n  };\r\n}\r\n\r\nexport default withRouter(HeaderNav);","import { withRouter } from \"react-router-dom\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst ScrollToTop = (props) => {\r\n  useEffect(() => {\r\n    if (window) window.scrollTo(0, 0);\r\n  }, [props.location]);\r\n\r\n  return props.children;\r\n};\r\n\r\nexport default withRouter(ScrollToTop);\r\n","import React from \"react\";\r\nimport \"./AppLayout.scss\";\r\nimport HeaderNav from \"../../containers/HeaderNav/HeaderNav\";\r\nimport ScrollToTop from \"../ScrollToTop/ScrollToTop\";\r\n\r\nexport function AppLayout(props) {\r\n  return (\r\n    <ScrollToTop>\r\n      <div className=\"app-layout\">\r\n        <HeaderNav />\r\n        {props.children}\r\n      </div>\r\n    </ScrollToTop>\r\n  );\r\n}\r\n","import { createAction, createRequestTypes, FAILURE, REQUEST, SUCCESS } from \".\";\r\n\r\nexport const COMMENT_THREAD = createRequestTypes('COMMENT_THREAD');\r\nexport const thread = {\r\n  request: (videoId, nextPageToken) => createAction(COMMENT_THREAD[REQUEST], {videoId, nextPageToken}),\r\n  success: (response, videoId) => createAction(COMMENT_THREAD[SUCCESS], {response, videoId}),\r\n  failure: (response) => createAction(COMMENT_THREAD[FAILURE], {response}),\r\n};","import React from \"react\";\r\nimport \"./Video.scss\";\r\n\r\nconst BASE_EMBED_URL = \"https://www.youtube.com/embed/\";\r\n\r\nexport function Video(props) {\r\n    if (!props.id) {\r\n        return null;\r\n    }\r\n    const embedUrl = `${BASE_EMBED_URL}${props.id}`;\r\n    return (\r\n        <div className=\"video-container\">\r\n            <div className=\"video\">\r\n                <iframe\r\n                    className=\"video-player\"\r\n                    src={embedUrl}\r\n                    frameBorder=\"0\"\r\n                    allow=\"autoplay; encrypted-media\"\r\n                    allowFullScreen\r\n                    title=\"video\"\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport \"./Rating.scss\";\r\nimport { Icon, Progress } from \"semantic-ui-react\";\r\nimport { getShortNumberString } from \"../../services/number/number-format\";\r\n\r\nexport function Rating(props) {\r\n  let rating = null;\r\n  let likeCount = props.likeCount !== 0 ? props.likeCount : null;\r\n  let dislikeCount = null;\r\n\r\n  if (props.likeCount && props.dislikeCount) {\r\n    const amountLikes = parseFloat(props.likeCount);\r\n    const amountDislikes = parseFloat(props.dislikeCount);\r\n    const percentagePositiveRatings =\r\n      100.0 * (amountLikes / (amountLikes + amountDislikes));\r\n\r\n    // Now that we have calculated the percentage, we bring the numbers into a better readable format\r\n    likeCount = getShortNumberString(amountLikes);\r\n    dislikeCount = getShortNumberString(amountDislikes);\r\n    rating = <Progress percent={percentagePositiveRatings} size=\"tiny\" />;\r\n  }\r\n  return (\r\n    <div className=\"rating\">\r\n      <div>\r\n        <Icon name=\"thumbs outline up\" />\r\n        <span>{likeCount}</span>\r\n      </div>\r\n      <div>\r\n        <Icon name=\"thumbs outline down\" />\r\n        <span>{dislikeCount}</span>\r\n      </div>\r\n      {rating}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Button, Divider, Icon } from \"semantic-ui-react\";\r\nimport \"./VideoMetadata.scss\";\r\nimport { Rating } from \"../Rating/Rating\";\r\n\r\nexport function VideoMetadata(props) {\r\n  if (!props.video || !props.video.statistics) {\r\n    return <div />;\r\n  }\r\n\r\n  const viewCount =\r\n    Number(props.video.statistics.viewCount).toLocaleString() || \"\";\r\n\r\n  return (\r\n    <div className=\"video-metadata\">\r\n      <h3>{props.video.snippet.title}</h3>\r\n      <div className=\"video-stats\">\r\n        <span>{viewCount} views</span>\r\n        <div className=\"video-actions\">\r\n          <Rating\r\n            likeCount={props.video.statistics.likeCount}\r\n            dislikeCount={props.video.statistics.dislikeCount}\r\n          />\r\n          <Button basic icon labelPosition=\"left\">\r\n            <Icon name=\"share\" />\r\n            Share\r\n          </Button>\r\n          <Button basic icon>\r\n            <Icon name=\"add circle\" />\r\n          </Button>\r\n          <Button basic icon>\r\n            <Icon name=\"ellipsis horizontal\" />\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      <Divider />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./VideoInfoBox.scss\";\r\nimport { Image, Button, Divider } from \"semantic-ui-react\";\r\nimport Linkify from \"react-linkify\";\r\nimport { getPublishedAtDateString } from \"../../services/date/date-format\";\r\nimport { getShortNumberString } from \"../../services/number/number-format\";\r\n\r\nexport class VideoInfoBox extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      collapsed: true,\r\n    };\r\n  }\r\n\r\n  getDescriptionParagraphs() {\r\n    const videoDescription = this.props.video.snippet\r\n      ? this.props.video.snippet.description\r\n      : null;\r\n    if (!videoDescription) {\r\n      return null;\r\n    }\r\n    return videoDescription.split(\"\\n\").map((paragraph, index) => (\r\n      <p key={index}>\r\n        <Linkify>{paragraph}</Linkify>\r\n      </p>\r\n    ));\r\n  }\r\n\r\n  getSubscriberButtonText() {\r\n    const { channel } = this.props;\r\n    const parsedSubscriberCount = Number(channel.statistics.subscriberCount);\r\n    const subscriberCount = getShortNumberString(parsedSubscriberCount);\r\n    return `Subscribe ${subscriberCount}`;\r\n  }\r\n\r\n  getConfig() {\r\n    let descriptionTextClass = \"collapsed\";\r\n    let buttonTitle = \"Show More\";\r\n    if (!this.state.collapsed) {\r\n      descriptionTextClass = \"expanded\";\r\n      buttonTitle = \"Show Less\";\r\n    }\r\n    return {\r\n      descriptionTextClass,\r\n      buttonTitle,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.video || !this.props.channel) {\r\n      return <div />;\r\n    }\r\n\r\n    const descriptionParagraphs = this.getDescriptionParagraphs();\r\n    const { descriptionTextClass, buttonTitle } = this.getConfig();\r\n    const publishedAtString = getPublishedAtDateString(\r\n      this.props.video.snippet.publishedAt\r\n    );\r\n\r\n    const { channel } = this.props;\r\n    const buttonText = this.getSubscriberButtonText();\r\n    const channelThumbnail = channel.snippet.thumbnails.medium.url;\r\n    const channelTitle = channel.snippet.title;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"video-info-box\">\r\n          <Image className=\"channel-image\" src={channelThumbnail} circular />\r\n          <div className=\"video-info\">\r\n            <div className=\"channel-name\">{channelTitle}</div>\r\n            <div className=\"video-publication-date\">{publishedAtString}</div>\r\n          </div>\r\n          <Button className=\"subscribe\" color=\"youtube\">\r\n            {buttonText}\r\n          </Button>\r\n          <div className=\"video-description\">\r\n            <div className={descriptionTextClass}>{descriptionParagraphs}</div>\r\n            <Button compact onClick={this.onToggleCollapseButtonClick}>\r\n              {buttonTitle}\r\n            </Button>\r\n          </div>\r\n        </div>\r\n        <Divider />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onToggleCollapseButtonClick = () => {\r\n    this.setState((prevState) => {\r\n      return {\r\n        collapsed: !prevState.collapsed,\r\n      };\r\n    });\r\n  };\r\n}\r\n","import React from \"react\";\r\nimport { Button, Icon } from \"semantic-ui-react\";\r\nimport \"./CommentsHeader.scss\";\r\n\r\nexport function CommentsHeader(props) {\r\n    return (\r\n        <div className=\"comments-header\">\r\n            <h4>{props.amountComments} Comments</h4>\r\n            <Button basic compact icon labelPosition=\"left\">\r\n                <Icon name=\"align left\" />\r\n                Sort by\r\n            </Button>\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport \"./Comment.scss\";\r\nimport { Button, Image } from \"semantic-ui-react\";\r\nimport { Rating } from \"../../../components/Rating/Rating\";\r\n\r\nexport function Comment(props) {\r\n  if (!props.comment) {\r\n    return <div />;\r\n  }\r\n  const topLevelComment = props.comment.snippet.topLevelComment;\r\n  const {\r\n    authorProfileImageUrl,\r\n    authorDisplayName,\r\n    textOriginal,\r\n  } = topLevelComment.snippet;\r\n  const likeCount = topLevelComment.snippet.likeCount;\r\n\r\n  return (\r\n    <div className=\"comment\">\r\n      <Image className=\"user-image\" src={authorProfileImageUrl} circular />\r\n      <div>\r\n        <div className=\"user-name\">{authorDisplayName}</div>\r\n        <span>{textOriginal}</span>\r\n        <div className=\"comment-actions\">\r\n          <Rating likeCount={likeCount} />{\" \"}\r\n          <Button size=\"mini\" compact>\r\n            REPLY\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./AddComment.scss\";\r\nimport { Form, Image, TextArea } from \"semantic-ui-react\";\r\n\r\nexport function AddComment() {\r\n    return (\r\n        <div className=\"add-comment\">\r\n            <Image\r\n                className=\"user-image\"\r\n                src=\"http://via.placeholder.com/48x48\"\r\n                circular\r\n            />\r\n            <Form>\r\n                <Form.TextArea\r\n                    control={TextArea}\r\n                    autoheight=\"true\"\r\n                    placeholder=\"Add a public comment\"\r\n                />\r\n            </Form>\r\n        </div>\r\n    );\r\n}\r\n","import React from \"react\";\r\nimport { CommentsHeader } from \"./CommentsHeader/CommentsHeader\";\r\nimport { Comment } from \"./Comment/Comment\";\r\nimport { AddComment } from \"./AddComment/AddComment\";\r\n\r\nexport class Comments extends React.Component {\r\n  render() {\r\n    if (!this.props.comments) {\r\n      return <div />;\r\n    }\r\n\r\n    const comments = this.props.comments.map((comment) => {\r\n      return <Comment comment={comment} key={comment.id} />;\r\n    });\r\n\r\n    return (\r\n      <div>\r\n        <CommentsHeader amountComments={this.props.amountComments} />\r\n        <AddComment key=\"add-comment\" />\r\n        {comments}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./NextUpVideo.scss\";\r\nimport { Checkbox, Divider } from \"semantic-ui-react\";\r\nimport { VideoPreview } from \"../../VideoPreview/VideoPreview\";\r\n\r\nexport function NextUpVideo(props) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className='next-up-container'>\r\n            <h4>Up next</h4>\r\n            <div className='up-next-toggle'>\r\n              <span>Autoplay</span>\r\n              <Checkbox toggle defaultChecked />\r\n            </div>\r\n        </div>\r\n        <VideoPreview horizontal={true} video={props.video} pathname='/watch' search={`?v=${props.video.id}`}/>\r\n        <Divider/>\r\n      </React.Fragment>\r\n    );\r\n  }","import React from \"react\";\r\nimport { VideoPreview } from \"../VideoPreview/VideoPreview\";\r\nimport \"./RelatedVideos.scss\";\r\nimport { NextUpVideo } from \"./NextUpVideo/NextUpVideo\";\r\n\r\nexport function RelatedVideos(props) {\r\n  if (!props.videos || !props.videos.length) {\r\n    return <div className=\"related-videos\" />;\r\n  }\r\n\r\n  // safe because before we check if the array has at least one element\r\n  const nextUpVideo = props.videos[0];\r\n  const remainingVideos = props.videos.slice(1);\r\n\r\n  const relatedVideosPreviews = remainingVideos.map((relatedVideo) => (\r\n    <VideoPreview\r\n      video={relatedVideo}\r\n      key={relatedVideo.id}\r\n      pathname=\"/watch\"\r\n      search={`?v=${relatedVideo.id}`}\r\n      horizontal={true}\r\n    />\r\n  ));\r\n\r\n  return (\r\n    <div className=\"related-videos\">\r\n      <NextUpVideo video={nextUpVideo} />\r\n      {relatedVideosPreviews}\r\n    </div>\r\n  );\r\n}\r\n","import { VIDEO_DETAILS, WATCH_DETAILS } from \"../actions/watch\";\r\nimport { SUCCESS } from \"../actions\";\r\nimport { CHANNEL_LIST_RESPONSE } from \"../api/youtube-api-response-types\";\r\n\r\nconst initialState = {\r\n  byId: {},\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n  switch (action.type) {\r\n    case WATCH_DETAILS[SUCCESS]:\r\n      return reduceWatchDetails(action.response, state);\r\n    case VIDEO_DETAILS[SUCCESS]:\r\n      return reduceVideoDetails(action.response, state);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction reduceWatchDetails(responses, prevState) {\r\n  const channelResponse = responses.find(\r\n    (response) => response.result.kind === CHANNEL_LIST_RESPONSE\r\n  );\r\n  let channels = {};\r\n  if (channelResponse && channelResponse.result.items) {\r\n    // we know that there will only be one item\r\n    // because we ask for a channel with a specific id\r\n    const channel = channelResponse.result.items[0];\r\n    channels[channel.id] = channel;\r\n  }\r\n  return {\r\n    ...prevState,\r\n    byId: {\r\n      ...prevState.byId,\r\n      ...channels,\r\n    },\r\n  };\r\n}\r\n\r\nfunction reduceVideoDetails(responses, prevState) {\r\n  const channelResponse = responses.find(response => response.result.kind === CHANNEL_LIST_RESPONSE);\r\n  let channelEntry = {};\r\n  if (channelResponse && channelResponse.result.items) {\r\n    // we're explicitly asking for a channel with a particular id\r\n    // so the response set must either contain 0 items (if a channel with the specified id does not exist)\r\n    // or at most one item (i.e. the channel we've been asking for)\r\n    const channel = channelResponse.result.items[0];\r\n    channelEntry =  {\r\n      [channel.id]: channel,\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...prevState,\r\n    byId: {\r\n      ...prevState.byId,\r\n      ...channelEntry,\r\n    }\r\n  };\r\n}\r\n\r\nexport const getChannel = (state, channelId) => {\r\n  if (!channelId) return null;\r\n  return state.channels.byId[channelId];\r\n};","import { createSelector } from \"reselect\";\r\nimport { getSearchParam } from \"../../services/url\";\r\nimport { SUCCESS } from \"../actions\";\r\nimport { COMMENT_THREAD } from \"../actions/comment\";\r\nimport { WATCH_DETAILS } from \"../actions/watch\";\r\nimport { COMMENT_THREAD_LIST_RESPONSE } from \"../api/youtube-api-response-types\";\r\n\r\nconst initialState = {\r\n  byVideo: {},\r\n  byId: {},\r\n};\r\n\r\nexport default function (state = initialState, action) {\r\n  switch (action.type) {\r\n    case COMMENT_THREAD[SUCCESS]:\r\n      return reduceCommentThread(action.response, action.videoId, state);\r\n    case WATCH_DETAILS[SUCCESS]:\r\n      return reduceWatchDetails(action.response, action.videoId, state);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction reduceWatchDetails(responses, videoId, prevState) {\r\n  const commentThreadResponse = responses.find(\r\n    (res) => res.result.kind === COMMENT_THREAD_LIST_RESPONSE\r\n  );\r\n  return reduceCommentThread(commentThreadResponse.result, videoId, prevState);\r\n}\r\n\r\nfunction reduceCommentThread(response, videoId, prevState) {\r\n  if (!response) {\r\n    return prevState;\r\n  }\r\n  const newComments = response.items.reduce((acc, item) => {\r\n    acc[item.id] = item;\r\n    return acc;\r\n  }, {});\r\n\r\n  // if we have already fetched some comments for a particular video\r\n  // we just append the ids for the new comments\r\n  const prevCommentIds = prevState.byVideo[videoId]\r\n    ? prevState.byVideo[videoId].ids\r\n    : [];\r\n  const commentIds = [...prevCommentIds, ...Object.keys(newComments)];\r\n\r\n  const byVideoComment = {\r\n    nextPageToken: response.nextPageToken,\r\n    ids: commentIds,\r\n  };\r\n\r\n  return {\r\n    ...prevState,\r\n    byId: {\r\n      ...prevState.byId,\r\n      ...newComments,\r\n    },\r\n    byVideo: {\r\n      ...prevState.byVideo,\r\n      [videoId]: byVideoComment,\r\n    },\r\n  };\r\n}\r\n\r\nconst getCommentIdsForVideo = (state, videoId) => {\r\n  const comment = state.comments.byVideo[videoId];\r\n  if (comment) {\r\n    return comment.ids;\r\n  }\r\n  return [];\r\n};\r\nexport const getCommentsForVideo = createSelector(\r\n  getCommentIdsForVideo,\r\n  (state) => state.comments.byId,\r\n  (commentIds, allComments) => {\r\n    return commentIds.map((commentId) => allComments[commentId]);\r\n  }\r\n);\r\n\r\n\r\nconst getComment = (state, location) => {\r\n  const videoId = getSearchParam(location, 'v');\r\n  return state.comments.byVideo[videoId];\r\n};\r\nexport const getCommentNextPageToken = createSelector(\r\n  getComment,\r\n  (comment) => {\r\n    return comment ? comment.nextPageToken : null;\r\n  }\r\n);","import React from \"react\";\r\nimport { Video } from \"../../../components/Video/Video\";\r\nimport { VideoMetadata } from \"../../../components/VideoMetadata/VideoMetadata\";\r\nimport { VideoInfoBox } from \"../../../components/VideoInfoBox/VideoInfoBox\";\r\nimport { Comments } from \"../../Comments/Comments\";\r\nimport { RelatedVideos } from \"../../../components/RelatedVideos/RelatedVideos\";\r\nimport \"./WatchContent.scss\";\r\nimport {\r\n  getVideoById,\r\n  getRelatedVideos,\r\n  getAmountComments,\r\n} from \"../../../store/reducers/videos\";\r\nimport { connect } from \"react-redux\";\r\nimport { getChannel } from \"../../../store/reducers/channels\";\r\nimport { getCommentsForVideo } from \"../../../store/reducers/comments\";\r\nimport { InfiniteScroll } from \"../../../components/InfiniteScroll/InfiniteScroll\";\r\n\r\nclass WatchContent extends React.Component {\r\n  render() {\r\n    if (!this.props.videoId) {\r\n      return <div />;\r\n    }\r\n\r\n    return (\r\n      <InfiniteScroll\r\n        bottomReachedCallback={this.props.bottomReachedCallback}\r\n        showLoader={this.shouldShowLoader()}\r\n      >\r\n        <div className=\"watch-grid\">\r\n          <Video className=\"video\" id={this.props.videoId} />\r\n          <VideoMetadata video={this.props.video} />\r\n          <VideoInfoBox\r\n            className=\"video-info-box\"\r\n            video={this.props.video}\r\n            channel={this.props.channel}\r\n          />\r\n          <Comments amountComments={112499} />\r\n          <RelatedVideos\r\n            className=\"relatedVideos\"\r\n            videos={this.props.relatedVideos}\r\n          />\r\n          <Comments\r\n            className=\"comments\"\r\n            comments={this.props.comments}\r\n            amountComments={this.props.amountComments}\r\n          />\r\n        </div>\r\n      </InfiniteScroll>\r\n    );\r\n  }\r\n\r\n  shouldShowLoader() {\r\n    return !!this.props.nextPageToken;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    relatedVideos: getRelatedVideos(state, props.videoId),\r\n    video: getVideoById(state, props.videoId),\r\n    channel: getChannel(state, props.channelId),\r\n    comments: getCommentsForVideo(state, props.videoId),\r\n    amountComments: getAmountComments(state, props.videoId),\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(WatchContent);\r\n","import React from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport * as watchActions from \"../../store/actions/watch\";\r\nimport * as commentActions from \"../../store/actions/comment\";\r\nimport { getYoutubeLibraryLoaded } from \"../../store/reducers/api\";\r\nimport { getSearchParam } from \"../../services/url\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport WatchContent from \"./WatchContent/WatchContent\";\r\nimport { getChannelId } from \"../../store/reducers/videos\";\r\nimport { getCommentNextPageToken } from \"../../store/reducers/comments\";\r\n\r\nexport class Watch extends React.Component {\r\n  render() {\r\n    const videoId = this.getVideoId();\r\n    return (\r\n      <WatchContent\r\n        videoId={videoId}\r\n        channelId={this.props.channelId}\r\n        bottomReachedCallback={this.fetchMoreComments}\r\n        nextPageToken={this.props.nextPageToken}\r\n      />\r\n    );\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.youtubeLibraryLoaded) {\r\n      this.fetchWatchContent();\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.youtubeLibraryLoaded !== prevProps.youtubeLibraryLoaded) {\r\n      this.fetchWatchContent();\r\n    }\r\n  }\r\n\r\n  getVideoId() {\r\n    return getSearchParam(this.props.location, \"v\");\r\n  }\r\n\r\n  fetchWatchContent() {\r\n    const videoId = this.getVideoId();\r\n    if (!videoId) {\r\n      this.props.history.push(\"/\");\r\n    }\r\n    this.props.fetchWatchDetails(videoId, this.props.channelId);\r\n  }\r\n\r\n  fetchMoreComments = () => {\r\n    if (this.props.nextPageToken) {\r\n      this.props.fetchCommentThread(this.getVideoId(), this.props.nextPageToken);\r\n    }\r\n  };\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\r\n    channelId: getChannelId(state, props.location, \"v\"),\r\n    nextPageToken: getCommentNextPageToken(state, props.location),\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  const fetchWatchDetails = watchActions.details.request;\r\n  const fetchCommentThread = commentActions.thread.request;\r\n  return bindActionCreators({ fetchWatchDetails, fetchCommentThread }, dispatch);\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Watch));\r\n","import React from \"react\";\r\nimport { SideBar } from \"../../containers/SideBar/SideBar\";\r\nimport { InfiniteScroll } from \"../InfiniteScroll/InfiniteScroll\";\r\nimport \"./VideoList.scss\";\r\nimport {VideoPreview} from '../VideoPreview/VideoPreview';\r\n\r\nexport class VideoList extends React.Component {\r\n  render() {\r\n    const videoPreviews = this.getVideoPreviews();\r\n    return (\r\n      <>\r\n        <SideBar />\r\n        <div className=\"video-list\">\r\n          <InfiniteScroll\r\n            bottomReachedCallback={this.props.bottomReachedCallback}\r\n            showLoader={this.props.showLoader}\r\n          >\r\n            {videoPreviews}\r\n          </InfiniteScroll>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  getVideoPreviews() {\r\n    if (!this.props.videos || !this.props.videos.length) {\r\n      return null;\r\n    }\r\n    const firstVideo = this.props.videos[0];\r\n    if (!firstVideo.snippet.description) {\r\n      return null;\r\n    }\r\n\r\n    return this.props.videos.map((video) => (\r\n      <VideoPreview\r\n        horizontal={true}\r\n        expanded={true}\r\n        video={video}\r\n        key={video.id}\r\n        pathname={\"/watch\"}\r\n        search={\"?v=\" + video.id}\r\n      />\r\n    ));\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { getYoutubeLibraryLoaded } from \"../../store/reducers/api\";\r\nimport {\r\n  allMostPopularVideosLoaded,\r\n  getMostPopularVideos,\r\n  getMostPopularVideosNextPageToken,\r\n} from \"../../store/reducers/videos\";\r\nimport * as videoActions from \"../../store/actions/video\";\r\nimport { VideoList } from \"../../components/VideoList/VideoList\";\r\n\r\nclass Trending extends React.Component {\r\n  componentDidMount() {\r\n    this.fetchTrendingVideos();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.youtubeLibraryLoaded !== this.props.youtubeLibraryLoaded) {\r\n      this.fetchTrendingVideos();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const loaderActive = this.shouldShowLoader();\r\n    return (\r\n      <VideoList\r\n        bottomReachedCallback={this.fetchMoreVideos}\r\n        showLoader={loaderActive}\r\n        videos={this.props.videos}\r\n      />\r\n    );\r\n  }\r\n\r\n  shouldShowLoader() {\r\n    return !this.props.allMostPopularVideosLoaded;\r\n  }\r\n\r\n  fetchTrendingVideos() {\r\n    if (this.props.youtubeLibraryLoaded) {\r\n      this.props.fetchMostPopularVideos(20, true);\r\n    }\r\n  }\r\n\r\n  fetchMoreVideos = () => {\r\n    const { nextPageToken } = this.props;\r\n    if (this.props.youtubeLibraryLoaded && nextPageToken) {\r\n      this.props.fetchMostPopularVideos(12, true, nextPageToken);\r\n    }\r\n  };\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    videos: getMostPopularVideos(state),\r\n    youtubeLibraryLoaded: getYoutubeLibraryLoaded(state),\r\n    allMostPopularVideosLoaded: allMostPopularVideosLoaded(state),\r\n    nextPageToken: getMostPopularVideosNextPageToken(state),\r\n  };\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  const fetchMostPopularVideos = videoActions.mostPopular.request;\r\n  return bindActionCreators({ fetchMostPopularVideos }, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Trending);\r\n","import { createAction, createRequestTypes, FAILURE, REQUEST, SUCCESS } from \".\";\r\n\r\nexport const SEARCH_FOR_VIDEOS = createRequestTypes('SEARCH_FOR_VIDEOS');\r\nexport const forVideos = {\r\n  request: (searchQuery, nextPageToken, amount) => createAction(SEARCH_FOR_VIDEOS[REQUEST], {searchQuery, nextPageToken, amount}),\r\n  success: (response, searchQuery) => createAction(SEARCH_FOR_VIDEOS[SUCCESS], {response, searchQuery}),\r\n  failure: (response, searchQuery) => createAction(SEARCH_FOR_VIDEOS[FAILURE],  {response, searchQuery}),\r\n};","import { SEARCH_FOR_VIDEOS } from \"../actions/search\";\r\nimport { REQUEST, SUCCESS } from \"../actions\";\r\n\r\nexport default function (state = {}, action) {\r\n  switch (action.type) {\r\n    case SEARCH_FOR_VIDEOS[SUCCESS]:\r\n      return reduceSearchForVideos(action.response, action.searchQuery, state);\r\n    case SEARCH_FOR_VIDEOS[REQUEST]:\r\n      // delete the previous search element if we don't load more search results for the previous search query\r\n      return action.nextPageToken ? state : {};\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nfunction reduceSearchForVideos(response, searchQuery, prevState) {\r\n  let searchResults = response.items.map((item) => ({\r\n    ...item,\r\n    id: item.id.videoId,\r\n  }));\r\n  if (prevState.query === searchQuery) {\r\n    const prevResults = prevState.results || [];\r\n    searchResults = prevResults.concat(searchResults);\r\n  }\r\n  return {\r\n    totalResults: response.pageInfo.totalResults,\r\n    nextPageToken: response.nextPageToken,\r\n    query: searchQuery,\r\n    results: searchResults,\r\n  };\r\n}\r\n\r\nexport const getSearchResults = (state) => state.search.results;\r\nexport const getSearchNextPageToken = (state) => state.search.nextPageToken;\r\n","import React from \"react\";\r\nimport \"./Search.scss\";\r\nimport { getYoutubeLibraryLoaded } from \"../../store/reducers/api\";\r\nimport {\r\n  getSearchNextPageToken,\r\n  getSearchResults,\r\n} from \"../../store/reducers/search\";\r\nimport * as searchActions from \"../../store/actions/search\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { getSearchParam } from \"../../services/url\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { VideoList } from \"../../components/VideoList/VideoList\";\r\n\r\nclass Search extends React.Component {\r\n  componentDidMount() {\r\n    if (!this.getSearchQuery()) {\r\n      // redirect to home component if search query is not there\r\n      this.props.history.push(\"/\");\r\n    }\r\n    this.searchForVideos();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (prevProps.youtubeApiLoaded !== this.props.youtubeApiLoaded) {\r\n      this.searchForVideos();\r\n    }\r\n  }\r\n\r\n  getSearchQuery() {\r\n    return getSearchParam(this.props.location, \"search_query\");\r\n  }\r\n\r\n  searchForVideos() {\r\n    const searchQuery = this.getSearchQuery();\r\n    if (this.props.youtubeApiLoaded) {\r\n      this.props.searchForVideos(searchQuery);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <VideoList\r\n        bottomReachedCallback={this.bottomReachedCallback}\r\n        showLoader={true}\r\n        videos={this.props.searchResults}\r\n      />\r\n    );\r\n  }\r\n\r\n  bottomReachedCallback = () => {\r\n    if (this.props.nextPageToken) {\r\n      this.props.searchForVideos(\r\n        this.getSearchQuery(),\r\n        this.props.nextPageToken,\r\n        25\r\n      );\r\n    }\r\n  };\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n  const searchForVideos = searchActions.forVideos.request;\r\n  return bindActionCreators({ searchForVideos }, dispatch);\r\n}\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    youtubeApiLoaded: getYoutubeLibraryLoaded(state),\r\n    searchResults: getSearchResults(state, props.location.search),\r\n    nextPageToken: getSearchNextPageToken(state, props.location.search),\r\n  };\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Search));\r\n","import React, { Component } from \"react\";\r\nimport Home from \"./containers/Home/Home\";\r\nimport { AppLayout } from \"./components/AppLayout/AppLayout\";\r\nimport { Route, Switch, withRouter } from \"react-router-dom\";\r\nimport Watch from \"./containers/Watch/Watch\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { youtubeLibraryLoaded } from \"./store/actions/api\";\r\nimport Trending from \"./containers/Trending/Trending\";\r\nimport Search from \"./containers/Search/Search\";\r\n\r\nconst API_KEY = \"AIzaSyD7G3GWK4JkLzMVm0GIdVDumttS1VhWcec\";\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <AppLayout>\r\n        <Switch>\r\n          <Route path=\"/feed/trending\" component={Trending} />\r\n          <Route path=\"/results\" render={() => <Search key={this.props.location.key}/>}/>\r\n          <Route\r\n            path=\"/watch\"\r\n            render={() => <Watch key={this.props.location.key} />}\r\n          />\r\n          <Route path=\"/\" component={Home} />\r\n        </Switch>\r\n      </AppLayout>\r\n    );\r\n  }\r\n  componentDidMount() {\r\n    this.loadYoutubeApi();\r\n  }\r\n\r\n  loadYoutubeApi() {\r\n    const script = document.createElement(\"script\");\r\n    script.src = \"https://apis.google.com/js/client.js\";\r\n\r\n    script.onload = () => {\r\n      window.gapi.load(\"client\", () => {\r\n        window.gapi.client.setApiKey(API_KEY);\r\n        window.gapi.client.load(\"youtube\", \"v3\", () => {\r\n          this.props.youtubeLibraryLoaded();\r\n        });\r\n      });\r\n    };\r\n\r\n    document.body.appendChild(script);\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return bindActionCreators({ youtubeLibraryLoaded }, dispatch);\r\n}\r\n\r\nexport default withRouter(connect(null, mapDispatchToProps)(App));\r\n","import apiReducer from './api';\r\nimport {combineReducers} from 'redux';\r\nimport videosReducer from './videos'\r\nimport channelsReducer from './channels';\r\nimport commentsReducer from './comments';\r\nimport searchReducer from './search';\r\n\r\nexport default combineReducers({\r\n  api: apiReducer,\r\n  videos: videosReducer,\r\n  channels: channelsReducer,\r\n  comments: commentsReducer,\r\n  search: searchReducer\r\n});","export function buildApiRequest(requestMethod, path, params, properties) {\r\n  params = removeEmptyParams(params);\r\n  let request;\r\n  if (properties) {\r\n    let resource = createResource(properties);\r\n    request = window.gapi.client.request({\r\n      body: resource,\r\n      method: requestMethod,\r\n      path: path,\r\n      params: params,\r\n    });\r\n  } else {\r\n    request = window.gapi.client.request({\r\n      method: requestMethod,\r\n      path: path,\r\n      params: params,\r\n    });\r\n  }\r\n  return request;\r\n}\r\n\r\nfunction removeEmptyParams(params) {\r\n  for (var p in params) {\r\n    if (!params[p] || params[p] === \"undefined\") {\r\n      delete params[p];\r\n    }\r\n  }\r\n  return params;\r\n}\r\n\r\nfunction createResource(properties) {\r\n  var resource = {};\r\n  var normalizedProps = properties;\r\n  for (var p in properties) {\r\n    var value = properties[p];\r\n    if (p && p.substr(-2, 2) === \"[]\") {\r\n      var adjustedName = p.replace(\"[]\", \"\");\r\n      if (value) {\r\n        normalizedProps[adjustedName] = value.split(\",\");\r\n      }\r\n      delete normalizedProps[p];\r\n    }\r\n  }\r\n  for (var prop in normalizedProps) {\r\n    // Leave properties that don't have values out of inserted resource.\r\n    if (normalizedProps.hasOwnProperty(prop) && normalizedProps[prop]) {\r\n      var propArray = prop.split(\".\");\r\n      var ref = resource;\r\n      for (var pa = 0; pa < propArray.length; pa++) {\r\n        var key = propArray[pa];\r\n        if (pa === propArray.length - 1) {\r\n          ref[key] = normalizedProps[prop];\r\n        } else {\r\n          ref = ref[key] = ref[key] || {};\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return resource;\r\n}\r\n\r\nexport function buildMostPopularVideosRequest(\r\n  amount = 12,\r\n  loadDescription = false,\r\n  nextPageToken,\r\n  videoCategoryId = null\r\n) {\r\n  let fields =\r\n    \"nextPageToken,prevPageToken,items(contentDetails/duration,id,snippet(channelId,channelTitle,publishedAt,thumbnails/medium,title),statistics/viewCount),pageInfo(totalResults)\";\r\n  if (loadDescription) {\r\n    fields += \",items/snippet/description\";\r\n  }\r\n  return buildApiRequest(\r\n    \"GET\",\r\n    \"/youtube/v3/videos\",\r\n    {\r\n      part: \"snippet,statistics,contentDetails\",\r\n      chart: \"mostPopular\",\r\n      maxResults: amount,\r\n      regionCode: \"US\",\r\n      pageToken: nextPageToken,\r\n      fields,\r\n      videoCategoryId,\r\n    },\r\n    null\r\n  );\r\n}\r\n\r\nexport function buildVideoCategoriesRequest() {\r\n  return buildApiRequest(\r\n    \"GET\",\r\n    \"/youtube/v3/videoCategories\",\r\n    {\r\n      part: \"snippet\",\r\n      regionCode: \"US\",\r\n    },\r\n    null\r\n  );\r\n}\r\n\r\nexport function buildVideoDetailRequest(videoId) {\r\n  return buildApiRequest(\r\n    \"GET\",\r\n    \"/youtube/v3/videos\",\r\n    {\r\n      part: \"snippet,statistics,contentDetails\",\r\n      id: videoId,\r\n      fields:\r\n        \"kind,items(contentDetails/duration,id,snippet(channelId,channelTitle,description,publishedAt,thumbnails/medium,title),statistics)\",\r\n    },\r\n    null\r\n  );\r\n}\r\n\r\nexport function buildRelatedVideosRequest(videoId, amountRelatedVideos = 12) {\r\n  return buildApiRequest(\r\n    \"GET\",\r\n    \"/youtube/v3/search\",\r\n    {\r\n      part: \"snippet\",\r\n      type: \"video\",\r\n      maxResults: amountRelatedVideos,\r\n      relatedToVideoId: videoId,\r\n    },\r\n    null\r\n  );\r\n}\r\n\r\nexport function buildChannelRequest(channelId) {\r\n  return buildApiRequest(\r\n    \"GET\",\r\n    \"/youtube/v3/channels\",\r\n    {\r\n      part: \"snippet,statistics\",\r\n      id: channelId,\r\n      fields:\r\n        \"kind,items(id,snippet(description,thumbnails/medium,title),statistics/subscriberCount)\",\r\n    },\r\n    null\r\n  );\r\n}\r\n\r\nexport function buildCommentThreadRequest(videoId, nextPageToken) {\r\n  return buildApiRequest(\r\n    \"GET\",\r\n    \"/youtube/v3/commentThreads\",\r\n    {\r\n      part: \"id,snippet\",\r\n      pageToken: nextPageToken,\r\n      videoId,\r\n    },\r\n    null\r\n  );\r\n}\r\n\r\nexport function buildSearchRequest(query, nextPageToken, amount = 12) {\r\n  return buildApiRequest(\r\n    \"GET\",\r\n    \"/youtube/v3/search\",\r\n    {\r\n      part: \"id,snippet\",\r\n      q: query,\r\n      type: \"video\",\r\n      pageToken: nextPageToken,\r\n      maxResults: amount,\r\n    },\r\n    null\r\n  );\r\n}\r\n","\r\nimport { call, fork, take, takeEvery, all, put } from 'redux-saga/effects';\r\nimport * as api from '../api/youtube-api';\r\nimport * as videoActions from '../actions/video';\r\nimport { REQUEST } from '../actions';\r\nimport { fetchEntity, ignoreErrors } from './index';\r\n\r\nexport const fetchVideoCategories = fetchEntity.bind(null, api.buildVideoCategoriesRequest, videoActions.categories);\r\n\r\nexport function* fetchMostPopularVideosByCategory(categories) {\r\n    const requests = categories.map(category => {\r\n        const wrapper = ignoreErrors(api.buildMostPopularVideosRequest, 12, false, null, category);\r\n        return call(wrapper);\r\n    });\r\n    try {\r\n        const response = yield all(requests);\r\n        yield put(videoActions.mostPopularByCategory.success(response, categories));\r\n    } catch (error) {\r\n        yield put(videoActions.mostPopularByCategory.failure(error));\r\n    }\r\n}\r\n\r\nexport function* watchMostPopularVideos() {\r\n    while (true) {\r\n        const { amount, loadDescription, nextPageToken } = yield take(videoActions.MOST_POPULAR[REQUEST]);\r\n        yield fork(fetchMostPopularVideos, amount, loadDescription, nextPageToken);\r\n    }\r\n}\r\n\r\nexport function* fetchMostPopularVideos(amount, loadDescription, nextPageToken) {\r\n    const request = api.buildMostPopularVideosRequest.bind(null, amount, loadDescription, nextPageToken);\r\n    yield fetchEntity(request, videoActions.mostPopular);\r\n}\r\n\r\n\r\nexport function* watchVideoCategories() {\r\n    yield takeEvery(videoActions.VIDEO_CATEGORIES[REQUEST], fetchVideoCategories);\r\n}\r\n\r\nexport function* watchMostPopularVideosByCategory() {\r\n    while (true) {\r\n        const { categories } = yield take(videoActions.MOST_POPULAR_BY_CATEGORY[REQUEST]);\r\n        yield fork(fetchMostPopularVideosByCategory, categories);\r\n    }\r\n}\r\n\r\n","import { fork, take, all, put, call } from \"redux-saga/effects\";\r\nimport * as watchActions from \"../actions/watch\";\r\nimport {\r\n  buildVideoDetailRequest,\r\n  buildRelatedVideosRequest,\r\n  buildChannelRequest,\r\n  buildCommentThreadRequest,\r\n} from \"../api/youtube-api\";\r\nimport { REQUEST } from \"../actions\";\r\nimport {\r\n  SEARCH_LIST_RESPONSE,\r\n  VIDEO_LIST_RESPONSE,\r\n} from \"../api/youtube-api-response-types\";\r\n\r\nexport function* watchWatchDetails() {\r\n  while (true) {\r\n    const { videoId, channelId } = yield take(\r\n      watchActions.WATCH_DETAILS[REQUEST]\r\n    );\r\n    yield fork(fetchWatchDetails, videoId, channelId);\r\n  }\r\n}\r\n\r\nfunction* fetchVideoDetails(responses, shouldFetchChannelInfo) {\r\n  const searchListResponse = responses.find(\r\n    (response) => response.result.kind === SEARCH_LIST_RESPONSE\r\n  );\r\n  const relatedVideoIds = searchListResponse.result.items.map(\r\n    (relatedVideo) => relatedVideo.id.videoId\r\n  );\r\n\r\n  const requests = relatedVideoIds.map((relatedVideoId) => {\r\n    return buildVideoDetailRequest.bind(null, relatedVideoId);\r\n  });\r\n\r\n  if (shouldFetchChannelInfo) {\r\n    // we have to extract the video's channel id from the video details response\r\n    // so we can load additional channel information.\r\n    // this is only needed, when a user directly accesses .../watch?v=1234\r\n    // because then we only know the video id\r\n    const videoDetailResponse = responses.find(\r\n      (response) => response.result.kind === VIDEO_LIST_RESPONSE\r\n    );\r\n    const videos = videoDetailResponse.result.items;\r\n    if (videos && videos.length) {\r\n      requests.push(\r\n        buildChannelRequest.bind(null, videos[0].snippet.channelId)\r\n      );\r\n    }\r\n  }\r\n\r\n  try {\r\n    const responses = yield all(requests.map((fn) => call(fn)));\r\n    yield put(watchActions.videoDetails.success(responses));\r\n  } catch (error) {\r\n    yield put(watchActions.videoDetails.failure(error));\r\n  }\r\n}\r\n\r\nexport function* fetchWatchDetails(videoId, channelId) {\r\n  let requests = [\r\n    buildVideoDetailRequest.bind(null, videoId),\r\n    buildRelatedVideosRequest.bind(null, videoId),\r\n    buildCommentThreadRequest.bind(null, videoId),\r\n  ];\r\n\r\n  if (channelId) {\r\n    requests.push(buildChannelRequest.bind(null, channelId));\r\n  }\r\n  try {\r\n    const responses = yield all(requests.map((fn) => call(fn)));\r\n    yield put(watchActions.details.success(responses, videoId));\r\n    yield call(fetchVideoDetails, responses, channelId === null);\r\n  } catch (error) {\r\n    yield put(watchActions.details.failure(error));\r\n  }\r\n}\r\n","import { fork, take } from \"redux-saga/effects\";\r\nimport { REQUEST } from \"../actions\";\r\nimport * as commentActions from \"../actions/comment\";\r\nimport * as api from \"../api/youtube-api\";\r\nimport { fetchEntity } from \"./index\";\r\n\r\nexport function* fetchCommentThread(videoId, nextPageToken) {\r\n  const request = api.buildCommentThreadRequest.bind(\r\n    null,\r\n    videoId,\r\n    nextPageToken\r\n  );\r\n  yield fetchEntity(request, commentActions.thread, videoId);\r\n}\r\n\r\nexport function* watchCommentThread() {\r\n  while (true) {\r\n    const { videoId, nextPageToken } = yield take(\r\n      commentActions.COMMENT_THREAD[REQUEST]\r\n    );\r\n    yield fork(fetchCommentThread, videoId, nextPageToken);\r\n  }\r\n}\r\n","import * as searchActions from \"../actions/search\";\r\nimport { REQUEST } from \"../actions\";\r\nimport { fork, take } from \"redux-saga/effects\";\r\nimport * as api from \"../api/youtube-api\";\r\nimport { fetchEntity } from \"./index\";\r\n\r\nexport function* searchForVideos(searchQuery, nextPageToken, amount) {\r\n  const request = api.buildSearchRequest.bind(\r\n    null,\r\n    searchQuery,\r\n    nextPageToken,\r\n    amount\r\n  );\r\n  yield fetchEntity(request, searchActions.forVideos, searchQuery);\r\n}\r\n\r\nexport function* watchSearchForVideos() {\r\n  while (true) {\r\n    const { searchQuery, amount, nextPageToken } = yield take(\r\n      searchActions.SEARCH_FOR_VIDEOS[REQUEST]\r\n    );\r\n    yield fork(searchForVideos, searchQuery, nextPageToken, amount);\r\n  }\r\n}\r\n","import {all, call, put, fork} from 'redux-saga/effects';\r\nimport {watchMostPopularVideos, watchMostPopularVideosByCategory, watchVideoCategories} from './video';\r\nimport { watchWatchDetails } from './watch';\r\nimport { watchCommentThread } from './comment';\r\nimport { watchSearchForVideos } from './search';\r\n\r\nexport default function* () {\r\n  yield all([\r\n    fork(watchMostPopularVideos),\r\n    fork(watchVideoCategories),\r\n    fork(watchMostPopularVideosByCategory),\r\n    fork(watchWatchDetails),\r\n    fork(watchCommentThread),\r\n    fork(watchSearchForVideos)\r\n  ]);\r\n}\r\n\r\nexport function* fetchEntity(request, entity, ...args) {\r\n  try {\r\n    const response = yield call(request);\r\n    // we directly return the result object and throw away the headers and the status text here\r\n    // if status and headers are needed, then instead of returning response.result, we have to return just response.\r\n    yield put(entity.success(response.result, ...args));\r\n  } catch (error) {\r\n    yield put(entity.failure(error, ...args));\r\n  }\r\n}\r\n\r\nexport function ignoreErrors(fn, ...args) {\r\n  return () => {\r\n    const ignoreErrorCallback = (response) => response;\r\n    return fn(...args).then(ignoreErrorCallback, ignoreErrorCallback);\r\n  };\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'semantic-ui-css/semantic.min.css';\nimport { Provider } from 'react-redux';\nimport {BrowserRouter} from 'react-router-dom';\nimport {configureStore} from './store/configureStore';\n\nconst store = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <App/>\n    </BrowserRouter>\n  </Provider>, document.getElementById('root'));\n","import { applyMiddleware, compose, createStore } from \"redux\";\r\nimport reducer from \"./reducers\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\nimport rootSaga from \"./sagas\";\r\n\r\nexport function configureStore() {\r\n    const sagaMiddleware = createSagaMiddleware();\r\n    const composeEnhancers =\r\n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n    const store = createStore(\r\n        reducer,\r\n        composeEnhancers(applyMiddleware(sagaMiddleware))\r\n    );\r\n\r\n    sagaMiddleware.run(rootSaga);\r\n    return store;\r\n}\r\n"],"sourceRoot":""}